area_bathroom:
  module: InputSelect
  class: InputSelect
  dependencies: utils
  timeout:
    Occupied: 120
    Sleeping: 120
    Bathing: 3600
  entity: input_select.area_bathroom
  triggers:
    - entity: sensor.switch_toilet
      state: '1_click_up'
      set_state: 'Occupied'
    - entity: sensor.switch_toilet
      state: '4_click_up'
      set_state: 'Idle'
    - entity: sensor.switch_bath_bathroom
      state: 'click_up'
      set_state: 'Bathing'
    - entity: sensor.switch_bath_bathroom
      state: '2_click'
      set_state: 'Occupied'
    - entity: binary_sensor.motion_bathroom
      state: 'on'
      set_state: 'Occupied'
      condition:
        - entity: input_select.area_bathroom
          expression: '!= "Disabled"'
        - entity: input_select.area_bathroom
          expression: '!= "Bathing"'
        - entity: input_select.area_home
          expression: '!= "Sleeping"'
    - entity: binary_sensor.motion_bathroom
      state: 'on'
      set_state: 'Sleeping'
      condition:
        - entity: input_select.area_bathroom
          expression: '!= "Disabled"'
        - entity: input_select.area_home
          state: Sleeping
    - entity: binary_sensor.motion_bathroom
      state: 'on'
      set_state: 'Bathing'
      condition:
        - entity: input_select.area_bathroom
          state: Bathing
  states:
    Occupied:
      - entity: light.group_bathroom
        state: 'on'
        brightness: 75
    Idle:
      - entity: light.group_bathroom
        state: 'off'
    Disabled:
      - entity: light.group_bathroom
        state: 'off'
    Sleeping:
      - entity: light.group_bathroom
        state: 'on'
        brightness: 1
    Bathing:
      - entity: light.group_bathroom
        state: 'on'
        brightness: 1
      - entity: light.mirror_bathroom
        state: 'off'